# Two-Stage Op-Amp Configuration

netlist: ../envs/netlist_template.sp

# Device parameter bounds [min, max] in SI units
parameters:
  W1:  # NMOS input pair width
    min: 1.0e-6
    max: 100.0e-6
    default: 50.0e-6      # midpoint of range (index 49 / 100 levels)
    step: 1.0e-6          # 1µm increments → 100 levels
  L1:  # NMOS input pair length
    min: 0.18e-6
    max: 5.0e-6
    default: 2.5e-6       # midpoint of range (index ~23 / 49 levels)
    step: 0.1e-6           # 100nm increments → 49 levels
  W3:  # PMOS load width
    min: 1.0e-6
    max: 200.0e-6
    default: 100.0e-6     # midpoint of range (index 99 / 200 levels)
    step: 1.0e-6           # 1µm increments → 200 levels
  L3:  # PMOS load length
    min: 0.18e-6
    max: 5.0e-6
    default: 2.5e-6       # midpoint of range
    step: 0.1e-6           # 100nm increments → 49 levels
  W5:  # Tail current source width
    min: 1.0e-6
    max: 100.0e-6
    default: 50.0e-6      # midpoint of range
    step: 1.0e-6           # 1µm increments → 100 levels
  L5:  # Tail current source length
    min: 0.18e-6
    max: 5.0e-6
    default: 2.5e-6       # midpoint of range
    step: 0.1e-6           # 100nm increments → 49 levels
  W7:  # Second stage NMOS width
    min: 1.0e-6
    max: 200.0e-6
    default: 100.0e-6     # midpoint of range
    step: 1.0e-6           # 1µm increments → 200 levels
  L7:  # Second stage NMOS length
    min: 0.18e-6
    max: 5.0e-6
    default: 2.5e-6       # midpoint of range
    step: 0.1e-6           # 100nm increments → 49 levels
  Cc:  # Compensation capacitor
    min: 0.1e-12
    max: 10.0e-12
    default: 5.0e-12      # midpoint of range (index 49 / 99 levels)
    step: 0.1e-12          # 0.1pF increments → 99 levels
  Ib:  # Bias current
    min: 1.0e-6
    max: 100.0e-6
    default: 50.0e-6      # midpoint of range (index 49 / 100 levels)
    step: 1.0e-6           # 1µA increments → 100 levels

# Spec pool: run `python generate_specs.py --config circuitrl/configs/opamp.yaml --n 1000`
# to create this file before training.
target_spec_file: opamp_specs_pool.json

# Target specifications
target_specs:
  gain_db:
    tolerance: 2.0
    direction: equal 
  ugbw:
    tolerance: 5.0e6
    direction: equal 
  phase_margin:
    tolerance: 5.0
    direction: equal 
  power:
    tolerance: 0.1e-3
    direction: equal        

# Environment settings
env:
  max_steps: 100
  sim_timeout: 30
  randomize_start: false

# ppo hyperparameters
ppo:
  learning_rate: 3.0e-4
  n_steps: 512
  batch_size: 64
  n_epochs: 10
  gamma: 0.99
  total_timesteps: 200000
